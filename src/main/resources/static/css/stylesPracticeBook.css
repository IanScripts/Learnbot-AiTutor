:root{
    --bg:#f1f5f9;
    --card:#d8d2c5;
    --ink:#111;
    --ink-on-dark:#fff;
    --topbar:#AFC7FF;
    --topbar-home:#DCE7FF;
    --topbar-border:#0f172a;
    --ring:rgba(56,189,248,.45);
}
:root[data-theme="dark"] {
    --bg:#020617;   /* dark navy page background */
}

*{box-sizing:border-box}
html,body{height:100%}

body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    background:var(--bg);
    color:var(--ink);
    line-height:1.4;
}

.topbar{
    position:sticky; top:0; z-index:10;
    display:grid; grid-template-columns:1fr auto 1fr; align-items:center; gap:.75rem;
    padding:.75rem 1rem; background:var(--topbar); border-bottom:2px solid var(--topbar-border);
}
.home-btn{
    grid-column:1; justify-self:start;
    display:inline-flex; align-items:center; gap:.5rem; white-space:nowrap; text-decoration:none;
    color:#0f172a; border:2px solid #0f172a; background:var(--topbar-home);
    padding:.45rem .7rem; border-radius:999px; font-weight:700;
}
.topbar .icon{width:1rem;height:1rem;fill:currentColor}
.page-title{grid-column:2;justify-self:center;margin:0;text-align:center;color:#0f172a;font-size:1.25rem;font-weight:800}
.title-math-letters{display:inline-flex;gap:.04em;font-weight:800}
.title-math-letters span:nth-child(1){color:#3891a6}
.title-math-letters span:nth-child(2){color:#4c5b5c}
.title-math-letters span:nth-child(3){color:#fde74c}
.title-math-letters span:nth-child(4){color:#db5461}

.page{display:flex;justify-content:center;padding:1rem}
.card{width:min(100%,1000px);background:var(--card);border:2px solid #0f172a;border-radius:18px;padding:1rem 1rem 1.25rem}
.helper-text{color:#1f2937}

.chip-row{display:flex;flex-wrap:wrap;gap:.5rem;margin:.5rem 0 0}
.chip{background:#f8fafc;color:#0f172a;border:2px solid #0f172a;border-radius:999px;padding:.25rem .6rem;font-weight:700;font-size:.85rem}

.problem-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:1rem;margin-top:1rem}
.problem-card{
    background:#fffef6;border:2px solid #0f172a;border-radius:16px;padding:1rem;min-height:120px;
    display:grid;place-items:center;cursor:pointer;box-shadow:0 2px 0 rgba(15,23,42,.25);
    transition:transform .06s ease, box-shadow .06s ease;
}
.problem-card:hover{transform:translateY(-1px)} .problem-card:active{transform:translateY(0)}
.problem-card:focus-visible{outline:none;box-shadow:0 0 0 4px var(--ring)}
.problem-text{font-size:1.4rem;font-weight:800;letter-spacing:.01em;color:#0b2540;text-align:center}
.answer{margin-top:.35rem;font-size:1.2rem;font-weight:800;color:#16a34a}
.problem-card.showing-answer .problem-text{opacity:.75}

.practice-actions{display:flex;justify-content:space-between;gap:.75rem;margin-top:1.25rem}
.btn-ghost,.btn-solid{display:inline-block;text-decoration:none;border:2px solid #0f172a;color:#0f172a;padding:.6rem .9rem;border-radius:12px;font-weight:800}
.btn-ghost{background:#e6eff9} .btn-ghost:hover{filter:brightness(1.03)}
.btn-solid{background:#ffd54a} .btn-solid:hover{filter:brightness(1.03)}
